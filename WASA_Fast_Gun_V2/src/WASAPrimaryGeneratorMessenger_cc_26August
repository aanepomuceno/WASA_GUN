#include "WASAPrimaryGeneratorMessenger.hh"
#include "WASAPrimaryGeneratorAction.hh"
#include "G4UIdirectory.hh"
#include "G4SystemOfUnits.hh"

WASAPrimaryGeneratorMessenger::WASAPrimaryGeneratorMessenger(WASAPrimaryGeneratorAction* generator)
    : fGenerator(generator) {
    
    fSetFileCmd = new G4UIcmdWithAString("/gun/setInputFile", this);
    fSetFileCmd->SetGuidance("Set input file for primary particles.");
    fSetFileCmd->SetParameterName("filename", false);
    fSetFileCmd->AvailableForStates(G4State_PreInit, G4State_Idle);
}

WASAPrimaryGeneratorMessenger::~WASAPrimaryGeneratorMessenger() {
    delete fSetFileCmd;
}

void WASAPrimaryGeneratorMessenger::SetNewValue(G4UIcommand* command, G4String newValue) {
    if (command == fSetFileCmd) {
        fGenerator->SetInputFileName(newValue);
    }
}

